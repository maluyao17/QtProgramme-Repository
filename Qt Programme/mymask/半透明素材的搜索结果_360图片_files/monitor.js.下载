(function(e){var t="v1.3.1-modify (2014.07.30)",n=function(e,n){var r=document,i=navigator,s=e.screen,o=document.domain.toLowerCase(),u=i.userAgent.toLowerCase(),a=function(){function e(e){return e!=null&&e.constructor!=null?Object.prototype.toString.call(e).slice(8,-1):""}return{isArray:function(t){return e(t)=="Array"},isObject:function(e){return e!==null&&typeof e=="object"},mix:function(e,t,n){for(var r in t)if(n||!(e[r]||r in e))e[r]=t[r];return e},encodeURIJson:function(e){var t=[];for(var n in e){var r=e[n];if(r==null)continue;/^(password|pass|username)$/i.test(n)&&(n="__key__",r="__val__"),/(password|pass|username)=/i.test(r)&&(r="__val__"),t.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}return t.join("&")}}}(),f={get:function(e){try{var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=r.cookie.match(n))?unescape(t[2]):""}catch(i){return""}},set:function(e,t,n){n=n||{};var i=n.expires;typeof i=="number"&&(i=new Date,i.setTime(i.getTime()+n.expires));try{r.cookie=e+"="+escape(t)+(i?";expires="+i.toGMTString():"")+(n.path?";path="+n.path:"")+(n.domain?"; domain="+n.domain:"")}catch(s){}}},l={getLocation:function(){var e=location.href;return e=e.replace(/[?#].*$/,""),e=/\.(s?htm|php)/.test(e)?e:e.replace(/\/$/,"")+"/",e},getGuid:function(){function t(e){var t=0,n=0,r=e.length-1;for(r;r>=0;r--){var i=parseInt(e.charCodeAt(r),10);t=(t<<6&268435455)+i+(i<<14),(n=t&266338304)!=0&&(t^=n>>21)}return t}function n(){var n=[i.appName,i.version,i.language||i.browserLanguage,i.platform,i.userAgent,s.width,"x",s.height,s.colorDepth,r.referrer].join(""),o=n.length,u=e.history.length;while(u)n+=u--^o++;return(Math.round(Math.random()*2147483647)^t(n))*2147483647}var u="__guid",a=f.get(u);if(!a){a=[t(o),n(),+(new Date)+Math.random()+Math.random()].join(".");var l={expires:2592e7,domain:document.domain.replace(/^.*?(\w+\.\w+)$/i,"$1"),path:"/"};f.set(u,a,l)}return function(){return a}}()},c={getBase:function(){return{guid:l.getGuid(),url:l.getLocation()}}},h={};return{version:t,util:l,data:c,config:h,sendLog:function(){return e.__qihoo_monitor_imgs={},function(t){var n="log_"+ +(new Date),r=e.__qihoo_monitor_imgs[n]=new Image;r.onload=r.onerror=function(){e.__qihoo_monitor_imgs&&e.__qihoo_monitor_imgs[n]&&(e.__qihoo_monitor_imgs[n]=null,delete e.__qihoo_monitor_imgs[n])},r.src=t}}(),buildLog:function(){var e="";return function(t,n,r){if(t===!1)return;t=t||{};var i=c.getBase();t=a.mix(i,t,!0);var s=n+a.encodeURIJson(t);if(s==e)return;e=s,setTimeout(function(){e=""},100);if(r)for(var o=0,u=r.length;o<u;o++)try{delete t[r[o]]}catch(f){}var l=a.encodeURIJson(t);l+="&t="+ +(new Date),n=n.indexOf("?")>-1?n+"&"+l:n+"?"+l,this.sendLog(n)}}(),log:function(e,t,n){t=t||"click";var r=h[t+"Url"];r&&this.buildLog(e,r,n)},setConf:function(e,t){var n={};return a.isObject(e)?n=e:n[e]=t,this.config=a.mix(this.config,n,!0),this},setUrl:function(e){return e&&(this.util.getLocation=function(){return e}),this}}}(e);e.monitor=n})(window);